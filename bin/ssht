#!/bin/bash

source ~/.bash_export
if [ $? -eq 1 ]; then exit 1; fi

if [ -z "$SIR_PORT" ] || [ -z "$SIR_HOST" ]; then
    echo You need \$SIR_PORT and \$SIR_HOST setted in your profile.
    exit 1
fi

PRG="$1"
shift

case "$PRG" in
    sir)
        { SS=autossh && hash $SS >/dev/null 2>&1; } || SS=ssh
        $SS -X -p $SIR_PORT "$SIR_HOST" $@ ;;
    mpd) ~/.bin/ssht.d/sir-mpd $@ ;;
    *) ;;
esac
