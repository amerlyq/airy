#!/usr/bin/env bash

# if [ $? -ne 0 ]; then pause; exit; fi

ERR="${1?'You need $? as first argument'}"
shift

MSG="Press any key to continue"

PROMPT="<======== $MSG ($(date +"%T")) ====($ERR)==>"

pstop() { read -n 1 -sp "$PROMPT " tmp && printf "$@\n"; }

case "$1" in
    -p) shift; printf "$PROMPT $@\n" ;;
    -e) shift; if [ "$ERR" != "0" ]; then pstop $@; fi ;;
     *) pstop $@ ;;
esac

# if [ "$CURR_PLTF" == "MINGW" ]; then
#     # -s = silent, -n1 = only one symbol needed to continue after the insert
#     read -sn1 -p "Paused: press any key to continue..."
# fi

exit $ERR
