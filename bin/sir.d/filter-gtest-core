#!/bin/sh

RELAT_DIR="$1"
#PATT="$2"

sed -e "s@\[ RUN.*\].*@\\\033[33m.\\\033[0m@" |
grep -v "\[.*OK \].*" | grep -v "\[-*\].*" |
sed -e "s@$RELAT_DIR/\|/home/`whoami`/@~\\\n\\\033[33m./@g" \
    -e "s@Running main() from.*@\\\033[0m\\\033[1;32;40m GTEST \\\033[0m@g" \
    -e "s@Failure@\\\033[0m\\\033[31mFailure\\\033[0m\\\n@g" \
    -e "s@\(:[0-9]*:\)@\\\033[0m\\\033[37m\1\\\033[0m@g" \
    -e "s@\(Value of: \)\(.*[(|\s]\)\(.*\)\([)|\s]\)@\1\\\033[34m\2\\\033[0m\\\033[36m\3\\\033[0m\\\033[34m\4\\\033[0m\\\n@" \
    -e "s@\(Actual: \)\(.*$\)@\1\\\033[35m\2\\\033[0m\\\n@" \
    -e "s@\(Expected: \)\(.*$\)@\1\\\033[32m\2\\\033[0m\\\n@" \
    -e "s@\(Which is: \)\(.*$\)@\1\\\033[32m\2\\\033[0m\\\n~@"
