# iforgot.sh
# This bash source file is for functions showing you
# samples of code that you always can’t remember.

# <<EOF expands heredoc, <<"EOF" leaves it as is.

iforgot() {
	local keywords="${@:-}"
	[ "$keywords" = '' ] && {
		echo -n 'What did you forgot, darling? > '
		read
		local keywords="$REPLY"
		echo "Thanks, also you can use parameters to this function, like"
		echo -e "\tiforgot <what>"
	}
	for keyword in $keywords; do
		declare -F | sed -nr 's/^declare -f (iforgot-.*'$keyword'.*)/\1/p'
	done
}

iforgot-restart-runlevel-for-me() {
echo 'USE CAREFUL.'
cat <<"EOF"
	for i in `rc-update | sed -rn 's/[ ]+([^ ]+) \| '"runlevel"'.*/\1/p'`; do
		/etc/init.d/$i restart
	done
EOF
}

iforgot-make-etags-for-emacs() {
cat <<"EOF"
	find . -name '*.c' -exec etags -a {} \;
EOF
}

iforgot-htmlize-my-code() {
	echo man code2html
}

iforgot-mount-my-flash-stick() {
	echo mount -t vfat -o user,rw,fmask=0111,dmask=0000,codepage=866,nls=iso8859-5,utf8,noexec
}

iforgot-uname-opts() {
	for i in a s n r v m p i o; do
        echo -e \\t-$i\\t`uname -$i`
    done
}

iforgot-check-gcc-options() {
	set -x
	gcc -Q --help=optimizers|grep enable
	set +x
}

iforgot-extract-xkb-opts-from-gnome() {
	set -x
	gconftool-2 -R /desktop/gnome/peripherals/keyboard/kbd
	set +x
}

iforgot-get-xkb-opts() {
	set -x
	less /usr/share/X11/xkb/rules/evdev.lst
	set +x
}

iforgot-android-screenshot() {
	echo "ddms"
}

iforgot-load-all-possible-sensors-modules() {
cat <<"EOF"
	for i in `modprobe -l | sed -rn 's|.*/hwmon/([^/]+)$|\1|p'`; do
		modprobe $i
	done
EOF
}

iforgot-force-fs-check() {
	echo -e \\t touch /forcefsck
}

iforgot-make-a-debug-build() {
	[ "$1" = '' ] &&
	local package='provide a package name via $1' ||
	local package=$1
cat <<EOF | grep 'emerge*'
	FEATURES="ccache nostrip" \
		USE="debug" \
		CFLAGS="$CFLAGS -ggdb" \
		CXXFLAGS="$CFLAGS" \
		emerge $package
EOF
}

iforgot-read-via-x0() {
cat <<"EOF"
	while read -d $'\0'; do
		echo "$REPLY"
	done <  <(find -type f -print0)
EOF
}

iforgot-where-is-my-completion() {
	echo -e \\teselect bashcomp enable base
}

iforgot-what-is-that-window-class() {
	echo -e \\txprop
}

iforgot-what-to-do-if-something-messed-the-fonts() {
cat <<"EOF"
	xset +fp /usr/share/fonts/terminus && xset fp rehash
EOF
}

iforgot-extended-regex() {
	set -x
	shopt -s extglob && abc='000123' && echo ${abc##+(0)}
	set +x
}

iforgot-how-to-trace-and-debug() {
cat <<EOF
	# Trace library and system calls:
	strace -p PID
	ltrace -p PID
	# Look for opened files of process with pid PID
	ls -l /proc/PID/fd/*
	# Kill a process to see its core
	kill -11 PID
EOF
}

iforgot-bookmarks-in-manpages() {
cat <<"EOF"
	man -P 'less -p \"^\s+Colors\"' eix
EOF
}

iforgot-create-a-new-git-repo-for-me() {
cat <<"EOF"
	git init home
	git remote add origin git@example.com:project_team.git
	git commit -am"fgsfds"
	git push origin master:refs/heads/master
EOF
}

iforgot-select-figlet-font-for-me() {
cat <<"EOF"
	echo '' > ~/cool_fonts
	for i in `ls /usr/share/figlet/*flf`; do
		clear
		echo $i
		figlet -f $i -c 12345
		figlet -f $i -c 67890
		read -n1
		[ $REPLY = 'y' ] && echo $i>>~/cool_fonts
	done
	cat ~/cool_fonts
EOF
}

iforgot-draw-me-cool-figlet-fonts() {
cat <<"EOF"
	for i in `cat ~/cool_fonts`; do
		echo $i
		figlet -f $i -c 12345
		figlet -f $i -c 67890
	done
EOF
}

iforgot-chroot-procedure() {
cat <<"EOF"
	mount -t proc none /mnt/chroot/proc
	mount --rbind /dev{/pts,/shm} /mnt/chroot/dev{/pts,/shm}
	mount --rbind /sys /mnt/chroot/sys
	[linux32] chroot /mnt/chroot /bin/bash

		env-update && source /etc/profile
		export PS1="(chroot) $PS1"
		# mount /boot /usr etc.
		…
		exit

	umount -l /mnt/chroot/proc
	umount -l /mnt/chroot/dev{/pts,/shm}
	umount -l /mnt/chroot/sys
EOF
}

iforgot-user-groups() {
	echo -e "\tuseradd -m -G audio,cdrom,games,plugdev,cdrw,floppy,portage,usb,video,wheel -s /bin/bash username"
}
