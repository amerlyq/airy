#!/bin/bash -e
source ~/.shell/func.d/cfgsetup

### systemd ###
link -sct /etc/X11 Xwrapper.config
usvc_activate -e \
  {demons,main,wm}.target \
  xorg.{socket,service,target}

# Start user instance right after boot and keep beside sessions
# USE:(to logoff) loginctl terminate-user "${USER:?}"
if cfgOpt u; then
  sudo loginctl enable-linger "${USER:?}"
fi

### startx ###
link xprofile ~/.xprofile
link xinitrc  ~/.xinitrc
link -t "${CURR_DIR_CACHE:?}/bin" startx auto-start
