#!/bin/bash -e
source ~/.shell/func.d/cfgsetup

### LINKS ###
link "$PWD/xprofile" ~/.xprofile
link "$PWD/xinitrc"  ~/.xinitrc

if distro arch; then
    cfg=/etc/pacman.conf
    ! grep -q '^#Color\s*$' $cfg || sudo sed -ri '/^#(Color)\s*$/s//\1/' $cfg
    link "$PWD/pacaur.conf" ~/.config/pacaur/config

    # Link qdbus to qdbus-qt4 on Arch
    #   SEE: https://wiki.archlinux.org/index.php/Qt#Installation
    link /etc/xdg/qtchooser/4.conf ~/.config/qtchooser/default.conf

# update-alternatives : x-session-manager cinnamon-session-cinnamon
elif distro ubuntu; then (cd ./ubuntu
    ./xsessionrc.gen

    if cfgOpt u; then
        echo "N: hosts, rc-local, nosudo_reboot"
        ./hosts.gen
        ./rc-local.gen
        ./nosudo_reboot
    fi
); fi
