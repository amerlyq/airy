#!/bin/bash -e
source ~/.shell/func.d/cfgsetup

### LINKS ###
link "$PWD" ~/.vim
link "$PWD" "${XDG_CONFIG_HOME:=$HOME/.config}/nvim"
mkdir -p "${XDG_DATA_HOME:=$HOME/.cache}/shada"
VCACHE=~/.cache/vim && mkdir -vp "$VCACHE"
if cfgOpt c; then rm -rf "$VCACHE"/*; fi
#touch ~/.vimtags  # For vim-easytags

### SPELL ###
# WARNING: first clean install will always fail as uk*.sug file is absent!
dst=$VCACHE/spell
if [[ ! -d $dst ]]; then
    has_pr wget
    mkdir -p "$dst"
    src='http://ftp.vim.org/pub/vim/runtime/spell'
    for nm in {ru,en,uk}.utf-8.{spl,sug}; do
        wget "$src/$nm" -O "$dst/$nm" || echo "No spl: $nm"
    done
fi

### PLUG-RC ###
dst=$VCACHE/bundle/unicode.vim/autoload/unicode/UnicodeData.txt
if [[ ! -f $dst && -d $VCACHE/bundle/unicode.vim ]]; then
    mkdir -p "${dst%/*}"
    fork_m wget -c -O "$dst" 'http://www.unicode.org/Public/UNIDATA/UnicodeData.txt'
fi
