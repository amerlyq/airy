#!/bin/bash -e
source ~/.shell/profile
source ~/.shell/func.d/cfgsetup

## Don't share samba in work network, only at home
case "$CURR_PROF" in
laptop|home)
  if cfgOpt r; then
    echo "! ATTENTION!!! Generate password for samba user !"
    sudo smbpasswd -a $(whoami)
  fi

  if cfgOpt u; then
    ### GENS ###
    ./samba.gen
    sudo service smbd restart
    # Once Samba has restarted, use this command
    # to check your smb.conf for any syntax errors
    testparm
  fi

;; *) hash samba >/dev/null 2>&1 && sudo service smbd stop; exit ;; esac

