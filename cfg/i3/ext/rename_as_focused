#!/bin/bash

getName() {
    local myid myclass myname
    myid=`xprop -root | awk '/_NET_ACTIVE_WINDOW\(WINDOW\)/{print $NF}'`
    myclass=`xprop -id $myid | awk '/WM_CLASS\(STRING\)/{print $NF}'`
    myname=`xprop -id $myid | awk '/WM_NAME\(STRING\)/{print $0}' | sed 's@.*"\(.*\)"@\1@'`
    echo $myname
    #echo "`xdotool getwindowname $(xdotool getwindowfocus)`"
}

getWorkspace() {
    local tmpfl cnt
    tmpfl=/tmp/i3wksps
    i3-msg -t get_workspaces > $tmpfl
    cnt=`jshon -l < $tmpfl`

    for (( i=0; i<$cnt; i++ )); do
        if [ "$(jshon -e $i -e focused < $tmpfl)" == "true" ]; then
            wname="$(jshon -e $i -e name -u < $tmpfl)"
            wnum=${wname%%:*}
            echo $wnum
        fi
    done
}

getWorkspace
i3-msg "rename workspace \"$wname\" to \"$wnum:$(getName)\""
