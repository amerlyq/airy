#!/bin/bash
cd $(dirname $(readlink -m ${0})) || exit

### LINKS ###
link(){ [[ ! -e $2 || -L $2 ]] && ln -sfvT "$1" $2; }

dir=~/.config/vimb
mkdir -p $dir

case "$1" in
-d|dark) THEME=dark ;;
-l|light) THEME=light ;;
-t|toggle) THEME=$(readlink "$dir/style.css")
    case ${THEME##*/} in
        dark*) THEME=light ;;
        light*) THEME=dark ;;
    esac ;;
*) THEME="${CURR_THEME:-dark}"
esac

link "$dir/theme/${THEME}.css" "$dir/style.css"

# Set other symlinks only if used full keys. Short color keys only toggle.
if [ "${1:0:1}" != '-' ]; then
    for nm in config 'dld-start' theme; do
        link "$PWD/$nm" "$dir/$nm"
    done
fi
